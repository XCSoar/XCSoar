\chapter{Daten  Files}\label{cha:data-files}\index{Daten-Files}\index{Steuerfiles}
Daten-Files werden bei \xc in zwei Kategorien eingeteilt:
\begin{description}
\item[Flugdaten Files ] Diese Files beinhalten Daten und Informationen zum Flugzeug, zur den
    Lufträumen, Karten, Wegpunkten und so weiter.  Diese Daten können uns sollten vom ''normalen''
    Benutzer auf seine Verhältnisse angepasst werden.
\item[Programm DatenFiles] Diese Files beinhalten Daten zum Aussehen und Verhalten des
    Programmes. Hierzu gehören z.B.\ Belegung von Tasten und Buttons, sowie deren Reaktion und
    Eingabe Reaktionen von externen Sensoren / Schaltern
\end{description}
Dies Kapitel beschäftigt sich vor allem mit den Datenfiles, welche der Benutzer selber anlegen und
bearbeiten kann(und sollte);  die Programm-Datenfiles werden im {\em XCSoar Advanced Configuration
Guide} beschrieben.


\section{File management}
Alle Filenamen müssen den Konventionen, welche unten aufgelistet sind, entsprechen.

Um sich später zwischen den Files und Datentypen zurecht zu finden, sollten von vornherein
aussagekräftige Namen für die jeweiligen Files benutzt werden. Gerade bei den Konfigurationsfiles
kommt es mitunter drauf an. Dennoch-es geht auch mit Standardeinstellungen ohne jedwede großartige
Änderung.

Bei älteren Pocket PC wie z.B. IPAQ etc\dots ist es sehr sinnvoll, das nicht flüchtige RAM zu benutzen, um
Datenverlust vorzubeugen. Die Installation aus z.B.\ SD-Karten wird sicher zu Performance-Verlusten
führen, ist aber aus Sicherheitsgründen nicht die schlechteste Wahl (Der Autor selber fliegt seit 5 Jahren
mit \xc installiert auf einer SD-Karte in einem 12 Jahre alten IPAQ 3850 in Wettbewerben, und es hat noch
nicht einmal gestört, daß ein Wert evtl. mal eine Sekunde zum Aktualisieren gebraucht hat. Man muß
natürlich auch nicht das 48MByte große Deutschland-File in High-Resolution  nehmen, das 12MByte File tut es
allemal. Sei jedem überlassen wie er/sie will).

Viele PDA's haben ein eingebautes RAM, welches auch bei Batterieausfall nicht verloren geht, aus diesem
Grunde ist empfohlen, genau dies RAM zu benutzen.


Wie auch immer, \xc greift permanent auf derartige Daten zu und es ist empfohlen, diese Daten und
Files auf schnellen Datenträgern zu speichern.

Bei neuen Geräten wie z.B. ANDROID-Geräten spielt dies nicht mehr die große Rolle, da durch den
gewaltigen Fortschritt der letzten 10 Jahre inzwischen alle  Speicherkarten schnell genug sind und den
Anforderungen locker genügen. Hier kann problemlos die höchste Auflösung der Karte benutzt werden.
Benutzer wie z.B.\ mich mit den "alten Gurken" sollten dennoch eine fixe SD-Karte benutzen (Class 6
aufwärts\dots)

Um Streß bei der Installation und Benutzung zu vermeiden, sollten alles Files und Daten bzgl. \xc  genau in
diesem Verzeichnis stehen:

\begin{verbatim}
My Documents/XCSoarData
\end{verbatim}

Auf PDA's können und sollten die Daten auch im Geräte internen Speicher abgelegt werden, genauso wie in
SD-Karten oder Compact-Flash-Karten. Immer aber muß der Ordner direkt im Hauptverzeichniß stehen und
\verb|XCSoarData| heißen.\index{Installation!Verzeichnis}

Zum Beispiel:
\begin{verbatim}
SD Card/XCSoarData
IPAQ File Store/XCSoarData
\end{verbatim}

Wenn Ihr unsicher seid, startet einfach ein ''jungfräulich'' neu installiertes'' \xc neu und es legt diese
Verzeichnisse von sich aus an.


\section{Karten Datenbank}\label{sec:map}

Ein Kartendatenbank-File (Endung \verb|.xcm|) beinhaltet das Gelände, die Topologie, Topgraphie und
weitere Geländemerkmale wie Türme, Auffälligkeiten sowie Wegpunkte und evtl. Lufträume.  Das
Gelände ist abgebildet als ein Höhenmodell über einem Raste aus Längen- und Breitengraden. Das interne
File-Format ist GeoJPEG2000

Die Topographie wie z.B.\ Straßen, Eisenbahnlinien, größere Städte, etc. sind als Vektordaten abgebildet.
Diese sind ESRI Shape Files gespeichert, die von OpenStreet MAP erzeugt wurden.

Die Karten können von der  \xc - Hompage heruntergeladen werden:

\xcsoarwebsite{/download/maps/}

Um eine den eigenen Bedürfnissen angepasste Kartendatenbank herunterzuladen (z.B. andere Auflösung,
anderer Kartenausschnitt o.ä.), kann unter \url{http://mapgen.xcsoar.org/}  der \xc-Karten-Generator
angeworfen werden, welche das entsprechend File erzeugt und zum Download
anbietet.

Soweit Wegpunkte und/oder Lufträume in der Kartendatenbank (z.B.\ verb''GER-High.xcm'' o.ä.) enthalten sind,
werden diese benutzt.

Wenn aber separate oder eine alternative Datenbanken für Wegpunkte und/oder Lufträume angegeben
wird, so werden alle Wegpunkte der Kartendatenbank (\verb".xcm") ignoriert und durch die separaten
Daten ersetzt.

Ein \xc angegebenes, separates angegebenes Wegpunkt-File wird alle in der Kartendatenbank enthaltenen
Wegpunkte ignorieren und nur die im separaten File enthaltenen Wegpunkte benutzen.


\section{Wegpunkte}
\xc  versteht verschiedene Wegpunkt-Formate:

\begin{itemize}
\item WinPilot/Cambridge (\verb|.dat|)
\item SeeYou (\verb|.cup|)
\item Zander (\verb|.wpz|)
\item OziExplorer (\verb|.wpt|)
\item GPSDump/FS, GEO and UTM (\verb|.wpt|)
\end{itemize}

Diese Files sind z.B. auf dem Server \footnote{Es existieren einige andere gespiegelte Seiten, falls die
Originalseite nicht erhältlich ist, einfach mal Googlen ...}:
\begin{center}
\url{http://soaringweb.org/TP}
\end{center}
erhältlich. Es gibt zahlreiche kommerzielle und frei verfügbare Software um diese Daten in beliebige Formate zu
konvertieren.

\achtung \textsl{Wenn die Höhe eines Wegpunktes als "Null" innerhalb eines Wegpunktfiles angegeben
wird, dann wird  \xc  die Höhe aus der Kartendatenbank gemäß des Höhenmmodelles entnehmen und die
Höhe demgemäß darstellen.}


\section{Lufträume}\index{File-Format!Luftraum}

\xc unterstützt Luftraum Files (extension \verb|.txt|) wobei ein Teil der Syntax
des weitverbreiteten OpenAir-Formates benutzt wird. Weiterhin wird das ''Tim Newport-Pearce file format''
(extension \verb|.sua|) unterstützt.

Files sind über
\begin{center}
\url{http://soaringweb.org/Airspace}
\end{center}
 erhältlich.

Die offiziellen deutschen Lufträume sind über die DAEC-Homepage erhältlich und werden ständig
aktualisiert:
\begin{center}
\url{https://www.daec.de/fachbereiche/luftraum-flugbetrieb/luftraumdaten}\index{Luftraum!Files-Download}
\index{Luftraum!Files-Fallschirmsprungzonen}\index{Luftraum!Deutsch}
\end{center}

Hier sind ebenfalls die exakten Daten der deutschen Grenze sowie aller deutschen Fallschirmsprungzonen
erhältlich. Folgende Lufträume werden von \xc~bislang unterstützt und demgemäß zur Auswahl angeboten:

ICAO-Klasse A bis G, Eingeschränktes-Gebiet, Verbots-Gebiet, Gefahren-Gebiet, Keine-Segelflugzeug, Kontrollzone,
AAT-Gebiet, Segelflugsektor, Wellenfenster, TMZ und
''andere''.

Für das OpenAir erweiterte Format (siehe \url{https://www.openaip.net/docs}) wird, falls im AC-Tag die ICAO-Klasse
A bis G oder UNCLASSIFIED ist, der 'AY'-Tag als Klasse interpretiert und entsprechend dargestellt.

Alle anderen Gebiete werden als ''andere'' dargestellt.

Neben dem OpenAir-Standard wird zur Festlegung der Funkfrequenz der Befehl 'AF' oder 'AR' verwendet.
Notiz. Seit 2018 bietet Naviter diesen Zusatz 'AF 999.999' an (suchen Sie hier 'Additional OpenAir fields' - \url{http://www.winpilot.com/UsersGuide/UserAirspace.asp})


\section{Flugplatz Details}\label{sec:airfield-details}\index{File-Format!Flugplatz-File}

Das Flugplatz-Detail-File  (extension \verb|.txt|) ist ein einfaches Text-File mit einem Eintrag für jeden
Flugplatz. Einträge werden in eckigen Klammern gemacht, gefolgt von den Einträgen für den jeweiligen
Flugplatz/Flugfeld. Der Text sollte nicht zu lang sein, da das Textfeld in  \xc bislang (V6.6) keinen Zeilenumbruch
erlaubt.

Der Text darf auch Bilder des entsprechenden Flugplatzes enthalten, um ein Bild direkt in \xc einzufügen,
muß  \verb|image=| gefolgt vom Namen des Files eingefügt werden. \textcolor{blue}{Dies ist derzeit unter Windows nicht unterstützt.} 

\achtung {\sl Es ist sicherzustellen, daß keinerlei Leerzeichen in den Filenamen nach  \verb|image=|
auftauchen!!!}

Welche Files unterstützt werden, hängt auch vom Betriebssystem ab, und auch, welche Programme/Apps
in Betrieb sind. ANDROID unterstützt z.B.  JPEG, andere Betriebssysteme benutzen meist BMP-Files

Die Namen der Flugplätze in diesen Files müssen exakt den Namen in den Wegpunkt-Files entsprechen,
einzige Ausnahme ist, daß Groß-und Kleinschreibung nicht unterschieden wird.

Auf der \xc Website werden Dateien für Flugplätze diverser Länder zu Herunterladen angeboten


Die \xc-Homepage enthält Files für viele Länder und bietet Programme (und links), um die
Files in verschiedene Formate zu konvertieren.  Es steht jedermann frei, Files hinzuzufügen und/oder zu aktualisieren,
um die Datenbanken jederzeit up to date zu halten.

Ein Beispiel aus dem australischen Flugplatz-File:
\begin{verbatim}
[BENALLA]
RUNWAYS:
  08 (RL1,7) 17 (RL53) 26
  (R) 35 (R)

COMMUNICATIONS:
  CTAF - 122.5 REMARKS: Nstd
  10 NM rad to 5000'

REMARKS:
  CAUTION - Animal haz. Rwy
  08L-26R and 17L-35R for
  glider ops and tailskidacft
  only, SR-SS. TFC PAT - Rgt
  circuits Rwy 08R-26L. NS
  ABTMT - Rwy 17R-35L fly wide

ICAO: YBLA

image=Benalla_sat.bmp

[GROOTE EYLANDT]
Blah blah blah blah
...
\end{verbatim}


\section{Polare}\label{sec:glide-polar}\index{Polare!File-Format}

Viele Polaren bekannter Flugzeuge sind bereits in \xc integriert.  Wenn Dein Flugzeug  hier nicht
aufgelistet ist, kannst Du problemlos eine Polare im {\sc WinPilot}-Format im Internet suchen (Endung:
\verb|.plr|).

Die Winpilot- und die \xc - Homepage bieten etliche Polaren zum freien Herunterladen an. Files für
andere Flugzeuge werden permanent vom \xc-Team erstellt, sowie entsprechende Daten vorliegen (oder
auf nette Anfrage beim \xc-Team)

Das Format der Files ist sehr einfach:

Zeilen, die mit einem \verb|*| beginnen, werden ignoriert und könne als Kommentarzeilen verwendet
werden.

Daten, die in die Berechnung eingehen sollen, müssen in einer Zeile stehen und von links nach rechts durch
Komma getrennt eingegeben werden. Folgende Werte werden benötigt und benutzt:

\begin{itemize}
\item Maximalgewicht des Flugzeuges  plus einem "Standard"-Piloten ohne Wasserballast.
\item Maximaler Wasserballast in $Kg$
\item Geschwindigkeit für den ersten Messpunkt (normalerweise minimales Sinken)
\item Sinkrate in $m/s$ für den ersten Meßpunkt
\item Geschwindigkeit für den zweiten  Messpunkt (normalerweise Geschwindigkeit des bestens
    Gleitens)
\item Sinkrate in $m/s$ für den zweiten Meßpunkt
\item Geschwindigkeit in $km/h$ für den dritten Meßpunkt  (normalerweise Mannövergeschwindigkeit).
\item Sinkrate in $m/s$ für den dritten Meßpunkt
\end{itemize}

Als Ergänzung können folgende Angaben gemacht werden:
\begin{itemize}
\item Die Flügelfläche in $^2$ um die Flächenbelastung zu errechnen  (0 setzen, falls unbekannt) .
\item Die max.\  Mannövergeschwindigkeit in $km/h$, um einfache Prüfungen bzgl.\
 der zugelassenen Höchstgeschwindigkeit durchführen zu können
\end{itemize}

Einträge mit einem vorangestellten \verb|*| werden als Kommentar behandelt.

Als Beispiel hier der Inhalt der Datei für eine LS-3:
\begin{verbatim}
*LS-3	{\sc WinPilot} POLAR file:
* MassDryGross[kg],
* Maximaler Wasserballast [Kg],
* Geschwindigkeit 1 [km/h], Sinken 1 [m/s],
* Geschwindigkeit 2, Sinken 2,
* Geschwindigkeit 3, Sinken 3  	
373,	121,	74.1,	-0.65,	102.0,	-0.67,	167.0,	-1.85
\end{verbatim}

Hiermit sollte jeder anhand seines Flughandbuches in der Lage sein, ein eigenes Polaren-File zu
erstellen, hochzuladen  und der Gemeinschaft der Segelflieger zur Verfügung zustellen.

Achtung!\\
Seid nicht zu optimistisch mit der Gleitzahl in diesem File!
\tip Alle Berechnungen von  \xc werden aufgrund dieser Daten erzeugt!!  Es geschieht daher zu
leicht, daß sämtliche Endanflüge auf dem Acker enden, wenn hier zu optimistisch
eingegeben wird!


\section{Profile}\index{File-Format!Profile}
Profil-Files (Endung \verb|.prf|) können benutzt werden, um Einstellungen von \xc zu speichern.
Das Format ist ein simpler ASCII-Text, welcher Paare von  \verb|<Bezeichner>=<Wert>|  - Daten enthält.
Bestimmte Werte wie Texte bzw.\ Namen sind durch Anführungsstriche getrennt, siehe folgende Beispiel:

\begin{verbatim}
PilotName="Baron Richthofen"
\end{verbatim}

Alle anderen Werte sind numerisch, einschließlich der logischen Werte (wahr $=1$, falsch$=0$).

Beispiel:


\begin{verbatim}
StartDistance=1000
\end{verbatim}

Alle Werte, welche eine physikalische Bedeutung bzw.\ Wert haben, werden in \textsf{SI}-Einheiten angegeben.
(Meter, Sekunden, Meter/Sekunde, km/h etc\dots)

Beim Sichern eines Profiles werden generell alle Einstellungen gesichert.
Die Profile können mit einem Text-Editor bearbeitet werden, um kleinere Files zu erzeugen,
welche beim Start geladen werden müssen. Weiterhin dient dies dem Austausch der Files
z.B.\ im Team. Wenn ein Profil geladen wird, werden lediglich die darin enthaltenen
Einstellungen in \xc überschrieben. Alle anderen Einstellungen bleiben erhalten.

Ein Standard-Profil wird grundsätzlich automatisch von  \xc erstellt, in dem Moment, da
die Konfigurationseinstellungen abgespeichert oder geändert werden.

Dies File hat den Namen  \verb|default.prf|.

Der einfachste Weg, ein neues Profil zu erzeugen ist, ein altes Profil unter einem neuen
Namen jedoch mit derselben Endung abzuspeichern. Bei nächsten Start von \xc  fragt dann das Programm, welches der vorhandenen Profil-Files benutzt werden soll.


\section{Checklist}\label{sec:checklist-file}\index{File-Format!Checkliste}

Die Checkliste  (\verb|xcsoar-checklist.txt|) benutzt ein ganz ähnliches Format
wie das Flugplatz-File. \index{Checkliste!File}
Jeder Seite wird mit der Überschrift in eckigen Klammern eingeleitet, anschließend erfolgen
zeilenweise die Eingabe der Checklist-Punkte. Die Anzahl der Seiten ist begrenzt auf 20.

Ein Beispiel: (Auszug):
\begin{verbatim}
[Flugzeug]
Haube geschlossen und verriegelt
Gurte Fest
Steuerung frei
Klappen eingefahren und verriegelt
Höhenmesser QNH
.
.
[Motor]
Sprithahn offen
Zündung an
Propellerstopper 
.
.
[Funk]
Vinsebeck     122.200
Höxter        123.625
...
\end{verbatim}
Damit die Checkliste Umlaute und Sonderzeichen korrekt dargestellt muß die Datei \warning 
in \textbf{UTF-8} kodiert sein!


\section{Aufgaben }\index{File-Format!Aufgaben}

Aufgaben-Files  (Endung: \verb|.tsk|) werden in einem \xc -eigenen, dem  XML-Format, gespeichert.
SeeYou-Aufgaben können problemlos geladen werden. (Endung: \verb|.cup|).


\section{Flug Logger-Mitschriebe} \label{sec:logfiles}
Der Software Logger von \xc erzeugt  IGC-Files (Endung: \verb|.igc|)
gemäß der Konventionen der FAI wie in  {\em Technical Specification for IGC-Approved GNSS Flight Recorders}.
beschrieben.

Die Log-Files werden  im ''log''- Unterverzeichnis des \xc -Verzeichnisses abgelegt. (normalerweise XCSoarData)
Nach dem Flug können diese Files kopiert und weiterverarbeitet werden.


\section{FLARM Identifikation}\label{sec:flarm-ident-file}\index{File-Format!Flarm}

Im  \fl-Identifikations-File  \verb|xcsoar-flarm.txt| wird eine einfache Tabelle
abgelegt, in welcher Pilotennamen und ICAO-ID zugeordnet sind.
Diese werden im \fl-Radar neben den \fl-Symbolen angezeigt.

Das Format dieses Files ist sehr einfach: Eine Liste von Einträgen, wie folgt:
{\em icao id=name}, wobei {\em icao id} der sechsstellige hex Wert der ICAO
aircraft ID ist und  nd {\em name} ein frei zu belegender Text ist.
Der Name ist frei wählbar aber  begrenzt auf 20 Zeichen.

Logischerweise werden Kurznamen bevorzugt um die Darstellung nicht zu überfrachten.

Beispiel:
\begin{verbatim}
DD8F12=WUS
DA8B06=Chuck Yeager
DDA556=OnkelHotte
\end{verbatim}

Derzeit ist dies File auf 200 Einträge begrenzt

Die  FlarmNet-Datenbank \verb|data.fln| wird unterstützt.
Diese enthält sämtliche \fl-Daten, welche von der \textsf{\textsf{FlarmNet}}-Gemeinschaft bereitgestellt werden.

Dies File kann von  \url{http://www.flarmnet.org}  heruntergeladen werden.
\textsl{Dies File muß sich innerhalb des XCSoarData - Verzeichnisses befinden.}


%%%%%%%%%%%%%%
\section{Eingabe Ereignisse}

Das Eingabe-Ereignis-File  (Endung \verb|.xci|) ist ein ASCII-Text File,
in welchem beschrieben werden kann, wie  \xc auf diverse Eingaben reagieren soll.

Du mußt nicht wissen, wie der Rechner (\xc) intern funktioniert, um einen Satz von
Reaktionen zu erstellen, es ist nur notwendig, sich an die Syntax zu halten und entsprechend logische
Reaktionen für das entsprechende Gerät an der entsprechenden Schnittstelle zu beschreiben.

Hier einige Gründe, weshalb es evtl.\ sinnvoll sein könnte, \textsf{xci} zu benutzen:
\begin{itemize}
\item Verändern des Erscheinungsbildes der  \button{Button} Beschriftungen
\item Erstellen eines ganzen Satzes von Buttons (z.B.\ für die Allgemeinheit)
\item Unterstützen eines externen Gerätes (Knüppelschalter, Bluetooth Keyboard etc\dots)
\item Anpassen jedes Buttons oder Schlüsselereignisses an eigene Bedürfnisse
\item Vielfache Reaktionen auf ein einfachen Ereignis von  \xc oder aber vom Rechner
ausgelösten Ereignisses.
\end{itemize}
Für nähere Informationen bezüglich einer eigenen Ereignis Datei, ist das 
{\em XCSoar Developer Manual} ein guter Anfang.


\section{Status}\label{sec:status}\index{File-Format!Status}
Status-Files sind Text Files in der Form  {\em Bezeichner  = Wert },
die in Blöcken  angeordnet sind. Jeder Block beinhaltet eine Statusmeldung
mit dem kompletten Parameter Satz.
Diese werden durch doppelte Leerzeichen getrennt.

Jeder Block kann eines der folgenden Felder enthalten:

\begin{description}
\item[key]  Dies ist der Text der Status - Meldung
\item[sound]  Pfad des ''\textsf{WAV}''- Audio, welches abgespielt werden soll
wenn eine Status Meldung erscheint. (optional)
\item[delay] Dauer in Millisekunden, wie lange die Status Meldung erscheinen soll (Optional)
\item[hide] Ein logischer Trigger (yes/no) welcher entscheidet, ob die Meldung
versteckt werden soll oder nicht. (das heißt, angezeigt, oder nicht).
\end{description}

Beispiel:
\begin{verbatim}
key=Simulation\r\nNichts ist real!
sound=\My Documents\XCSoarData\Start_Real.wav
delay=1500

key=Aufgabe begonnen
delay=1500
hide=yes
\end{verbatim}

